<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TModLoader: Terraria.Program.PortFilesFromXtoY</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">TModLoader<span id="projectnumber">&#160;v1.4.4.9</span>
   </div>
   <div id="projectbrief">TModLoader source code documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/daf/classTerraria_1_1Program_a8b7dba2e2d3787ec0f5fb76babb0edd4.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="contents">
<a id="a8b7dba2e2d3787ec0f5fb76babb0edd4" name="a8b7dba2e2d3787ec0f5fb76babb0edd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b7dba2e2d3787ec0f5fb76babb0edd4">&#9670;&#160;</a></span>PortFilesFromXtoY()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d6/da9/classList.html">void</a> Terraria.Program.PortFilesFromXtoY </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>superSavePath</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>source</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>destination</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>maxVersionOfSource</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>isCloud</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>isAtomicLockable</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Super Save Path is the parent directory containing both folders. Usually Program.SavePath or Steam Cloud Source is of variety StableFolder, PreviewFolder... etc Destination is of variety StableFolder, PreviewFolder... etc maxVersionOfSource is used to determine if we even should port the files. Example: 1.4.3-Legacy has maxVersion of 2022.9 isAtomicLockable could be expressed as CopyToNewlyCreatedDestinationFolderViaTempFolder if that makes more sense to the reader. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d7a/Program_8cs_source.html#l00377">377</a> of file <a class="el" href="../../d8/d7a/Program_8cs_source.html">Program.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  378</span>    {</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">newFolderPath</a> = Path.Combine(<a class="code hl_class" href="../../d6/da9/classList.html">superSavePath</a>, <a class="code hl_class" href="../../d6/da9/classList.html">destination</a>);</div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">newFolderPathTemp</a> = Path.Combine(<a class="code hl_class" href="../../d6/da9/classList.html">superSavePath</a>, <a class="code hl_class" href="../../d6/da9/classList.html">destination</a> + <span class="stringliteral">&quot;-temp&quot;</span>);</div>
<div class="line"><span class="lineno">  381</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">oldFolderPath</a> = Path.Combine(<a class="code hl_class" href="../../d6/da9/classList.html">superSavePath</a>, source);</div>
<div class="line"><span class="lineno">  382</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">cloudName</a> = (<a class="code hl_class" href="../../d6/da9/classList.html">isCloud</a> ? <span class="stringliteral">&quot;Steam Cloud&quot;</span> : <span class="stringliteral">&quot;Local Files&quot;</span>);</div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">if</span> (!<a class="code hl_class" href="../../d6/da9/classList.html">Directory</a>.Exists(<a class="code hl_class" href="../../d6/da9/classList.html">oldFolderPath</a>))</div>
<div class="line"><span class="lineno">  384</span>        {</div>
<div class="line"><span class="lineno">  385</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  386</span>        }</div>
<div class="line"><span class="lineno">  387</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">portFilePath</a> = Path.Combine(<a class="code hl_class" href="../../d6/da9/classList.html">superSavePath</a>, <a class="code hl_class" href="../../d6/da9/classList.html">destination</a>, (<a class="code hl_class" href="../../d6/da9/classList.html">maxVersionOfSource</a> == <span class="stringliteral">&quot;2022.9&quot;</span>) ? (<span class="stringliteral">&quot;143ported_&quot;</span> + <a class="code hl_class" href="../../d6/da9/classList.html">cloudName</a> + <span class="stringliteral">&quot;.txt&quot;</span>) : <a class="code hl_class" href="../../d6/da9/classList.html">$</a><span class="stringliteral">&quot;{maxVersionOfSource}{destination}ported_{cloudName}.txt&quot;</span>);</div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordflow">if</span> ((<a class="code hl_class" href="../../d6/da9/classList.html">isAtomicLockable</a> &amp;&amp; <a class="code hl_class" href="../../d6/da9/classList.html">Directory</a>.Exists(<a class="code hl_class" href="../../d6/da9/classList.html">newFolderPath</a>)) || (!<a class="code hl_class" href="../../d6/da9/classList.html">isAtomicLockable</a> &amp;&amp; File.Exists(<a class="code hl_class" href="../../d6/da9/classList.html">portFilePath</a>)))</div>
<div class="line"><span class="lineno">  389</span>        {</div>
<div class="line"><span class="lineno">  390</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  391</span>        }</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/da9/classList.html">newFolderPath</a>.Contains(<span class="stringliteral">&quot;OneDrive&quot;</span>))</div>
<div class="line"><span class="lineno">  393</span>        {</div>
<div class="line"><span class="lineno">  394</span>            <a class="code hl_class" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging.html">Logging</a>.<a class="code hl_property" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">tML</a>.Info((<span class="keywordtype">object</span>)<span class="stringliteral">&quot;Ensuring OneDrive is running before starting to Migrate Files&quot;</span>);</div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  396</span>            {</div>
<div class="line"><span class="lineno">  397</span>                <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">oneDrivePath1</a> = Path.Combine(<a class="code hl_enumvalue" href="../../da/d24/namespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b.html#affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274">Environment</a>.GetFolderPath(<a class="code hl_enumvalue" href="../../da/d24/namespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b.html#affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274">Environment</a>.SpecialFolder.LocalApplicationData), <span class="stringliteral">&quot;Microsoft\\OneDrive\\OneDrive.exe&quot;</span>);</div>
<div class="line"><span class="lineno">  398</span>                <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">oneDrivePath2</a> = Path.Combine(<a class="code hl_enumvalue" href="../../da/d24/namespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b.html#affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274">Environment</a>.GetFolderPath(<a class="code hl_enumvalue" href="../../da/d24/namespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b.html#affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274">Environment</a>.SpecialFolder.ProgramFiles), <span class="stringliteral">&quot;Microsoft OneDrive\\OneDrive.exe&quot;</span>);</div>
<div class="line"><span class="lineno">  399</span>                <span class="keywordflow">if</span> (File.Exists(<a class="code hl_class" href="../../d6/da9/classList.html">oneDrivePath1</a>))</div>
<div class="line"><span class="lineno">  400</span>                {</div>
<div class="line"><span class="lineno">  401</span>                    <a class="code hl_class" href="../../d6/da9/classList.html">Process</a>.Start(<a class="code hl_class" href="../../d6/da9/classList.html">oneDrivePath1</a>);</div>
<div class="line"><span class="lineno">  402</span>                }</div>
<div class="line"><span class="lineno">  403</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (File.Exists(<a class="code hl_class" href="../../d6/da9/classList.html">oneDrivePath2</a>))</div>
<div class="line"><span class="lineno">  404</span>                {</div>
<div class="line"><span class="lineno">  405</span>                    <a class="code hl_class" href="../../d6/da9/classList.html">Process</a>.Start(<a class="code hl_class" href="../../d6/da9/classList.html">oneDrivePath2</a>);</div>
<div class="line"><span class="lineno">  406</span>                }</div>
<div class="line"><span class="lineno">  407</span>                <a class="code hl_class" href="../../d6/da9/classList.html">Thread</a>.Sleep(3000);</div>
<div class="line"><span class="lineno">  408</span>            }</div>
<div class="line"><span class="lineno">  409</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  410</span>            {</div>
<div class="line"><span class="lineno">  411</span>            }</div>
<div class="line"><span class="lineno">  412</span>        }</div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">sourceFolderConfig</a> = Path.Combine(<a class="code hl_variable" href="../../d9/daf/classTerraria_1_1Program_aeb611f3f6ff2ff69f95bce3f56cc2282.html#aeb611f3f6ff2ff69f95bce3f56cc2282">LaunchParameters</a>.ContainsKey(<span class="stringliteral">&quot;-savedirectory&quot;</span>) ? <a class="code hl_variable" href="../../d9/daf/classTerraria_1_1Program_aeb611f3f6ff2ff69f95bce3f56cc2282.html#aeb611f3f6ff2ff69f95bce3f56cc2282">LaunchParameters</a>[<span class="stringliteral">&quot;-savedirectory&quot;</span>] : <a class="code hl_enumvalue" href="../../da/d0b/namespaceTerraria_1_1Enums_a204aa8cb535489f0ef22f6ea25eda014.html#a204aa8cb535489f0ef22f6ea25eda014a419f3742e6de8e0ec4b22cce005e7630">Platform</a>.Get&lt;<a class="code hl_class" href="../../d6/da9/classList.html">IPathService</a>&gt;().<a class="code hl_class" href="../../d6/da9/classList.html">GetStoragePath</a>(<span class="stringliteral">&quot;Terraria&quot;</span>), source, <span class="stringliteral">&quot;config.json&quot;</span>);</div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">if</span> (!File.Exists(<a class="code hl_class" href="../../d6/da9/classList.html">sourceFolderConfig</a>))</div>
<div class="line"><span class="lineno">  415</span>        {</div>
<div class="line"><span class="lineno">  416</span>            <a class="code hl_class" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging.html">Logging</a>.<a class="code hl_property" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">tML</a>.Info((<span class="keywordtype">object</span>)(<span class="stringliteral">&quot;No config.json found at &quot;</span> + <a class="code hl_class" href="../../d6/da9/classList.html">sourceFolderConfig</a> + <span class="stringliteral">&quot;\nAssuming nothing to port&quot;</span>));</div>
<div class="line"><span class="lineno">  417</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  418</span>        }</div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordtype">string</span> <a class="code hl_class" href="../../d6/da9/classList.html">lastLaunchedTml</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  421</span>        {</div>
<div class="line"><span class="lineno">  422</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/da9/classList.html">JsonConvert</a>.DeserializeObject&lt;<a class="code hl_class" href="../../d6/da9/classList.html">Dictionary&lt;string, object&gt;</a>&gt;(File.ReadAllText(<a class="code hl_class" href="../../d6/da9/classList.html">sourceFolderConfig</a>)).TryGetValue(<span class="stringliteral">&quot;LastLaunchedTModLoaderVersion&quot;</span>, <a class="code hl_class" href="../../d6/da9/classList.html">out</a> <a class="code hl_class" href="../../d6/da9/classList.html">var</a> <a class="code hl_class" href="../../d6/da9/classList.html">lastLaunchedTmlObject</a>))</div>
<div class="line"><span class="lineno">  423</span>            {</div>
<div class="line"><span class="lineno">  424</span>                <a class="code hl_class" href="../../d6/da9/classList.html">lastLaunchedTml</a> = (string)<a class="code hl_class" href="../../d6/da9/classList.html">lastLaunchedTmlObject</a>;</div>
<div class="line"><span class="lineno">  425</span>            }</div>
<div class="line"><span class="lineno">  426</span>        }</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">catch</span> (<a class="code hl_class" href="../../d4/d67/classException.html">Exception</a> <a class="code hl_class" href="../../d6/da9/classList.html">e2</a>)</div>
<div class="line"><span class="lineno">  428</span>        {</div>
<div class="line"><span class="lineno">  429</span>            e2.HelpLink = <span class="stringliteral">&quot;https://github.com/tModLoader/tModLoader/wiki/Basic-tModLoader-Usage-FAQ#configjson-corrupted&quot;</span>;</div>
<div class="line"><span class="lineno">  430</span>            <a class="code hl_class" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting.html">ErrorReporting</a>.<a class="code hl_function" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_a574da73d6bc90ecf7de39c0dac0a9be9.html#a574da73d6bc90ecf7de39c0dac0a9be9">FatalExit</a>(<a class="code hl_class" href="../../d6/da9/classList.html">$</a><span class="stringliteral">&quot;Attempt to Port from \&quot;{oldFolderPath}\&quot; to \&quot;{newFolderPath}\&quot; aborted, the \&quot;{sourceFolderConfig}\&quot; file is corrupted.&quot;</span>, <a class="code hl_class" href="../../d6/da9/classList.html">e2</a>);</div>
<div class="line"><span class="lineno">  431</span>        }</div>
<div class="line"><span class="lineno">  432</span>        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.<a class="code hl_class" href="../../d6/da9/classList.html">IsNullOrEmpty</a>(<a class="code hl_class" href="../../d6/da9/classList.html">lastLaunchedTml</a>))</div>
<div class="line"><span class="lineno">  433</span>        {</div>
<div class="line"><span class="lineno">  434</span>            <a class="code hl_class" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting.html">ErrorReporting</a>.<a class="code hl_function" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_a574da73d6bc90ecf7de39c0dac0a9be9.html#a574da73d6bc90ecf7de39c0dac0a9be9">FatalExit</a>(<a class="code hl_class" href="../../d6/da9/classList.html">$</a><span class="stringliteral">&quot;Attempt to Port from \&quot;{oldFolderPath}\&quot; to \&quot;{newFolderPath}\&quot; aborted, the \&quot;{sourceFolderConfig}\&quot; file is missing the \&quot;LastLaunchedTModLoaderVersion\&quot; entry. If porting is desired, follow the instructions at \&quot;https://github.com/tModLoader/tModLoader/wiki/Basic-tModLoader-Usage-FAQ#manually-port\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  435</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  436</span>        }</div>
<div class="line"><span class="lineno">  437</span>        <span class="keywordflow">if</span> (<span class="keyword">new</span> Version(<a class="code hl_class" href="../../d6/da9/classList.html">lastLaunchedTml</a>).MajorMinor() &gt; <span class="keyword">new</span> Version(<a class="code hl_class" href="../../d6/da9/classList.html">maxVersionOfSource</a>))</div>
<div class="line"><span class="lineno">  438</span>        {</div>
<div class="line"><span class="lineno">  439</span>            <a class="code hl_class" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging.html">Logging</a>.<a class="code hl_property" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">tML</a>.Info((<span class="keywordtype">object</span>)<a class="code hl_class" href="../../d6/da9/classList.html">$</a><span class="stringliteral">&quot;Attempt to Port from \&quot;{oldFolderPath}\&quot; to \&quot;{newFolderPath}\&quot; aborted, \&quot;{lastLaunchedTml}\&quot; is a newer version.&quot;</span>);</div>
<div class="line"><span class="lineno">  440</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  441</span>        }</div>
<div class="line"><span class="lineno">  442</span>        <a class="code hl_class" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging.html">Logging</a>.<a class="code hl_property" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">tML</a>.Info((<span class="keywordtype">object</span>)(<a class="code hl_class" href="../../d6/da9/classList.html">$</a><span class="stringliteral">&quot;Cloning current {source} files to {destination} save folder. Porting {cloudName}.&quot;</span> + <span class="stringliteral">&quot;\nThis may take a few minutes for a large amount of files.&quot;</span>));</div>
<div class="line"><span class="lineno">  443</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  444</span>        {</div>
<div class="line"><span class="lineno">  445</span>            <a class="code hl_class" href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities.html">FileUtilities</a>.<a class="code hl_function" href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities_a576795e957a016079bd464d6589f510b.html#a576795e957a016079bd464d6589f510b">CopyFolderEXT</a>(<a class="code hl_class" href="../../d6/da9/classList.html">oldFolderPath</a>, <a class="code hl_class" href="../../d6/da9/classList.html">isAtomicLockable</a> ? <a class="code hl_class" href="../../d6/da9/classList.html">newFolderPathTemp</a> : <a class="code hl_class" href="../../d6/da9/classList.html">newFolderPath</a>, <a class="code hl_class" href="../../d6/da9/classList.html">isCloud</a>, <a class="code hl_class" href="../../d6/da9/classList.html">new</a> <a class="code hl_class" href="../../d6/da9/classList.html">Regex</a>(<span class="stringliteral">&quot;(Workshop|ModSources)($|/|\\\\)&quot;</span>), <a class="code hl_class" href="../../d6/da9/classList.html">overwriteAlways</a>: <a class="code hl_class" href="../../d6/da9/classList.html">false</a>, <a class="code hl_class" href="../../d6/da9/classList.html">overwriteOld</a>: <a class="code hl_class" href="../../d6/da9/classList.html">true</a>);</div>
<div class="line"><span class="lineno">  446</span>        }</div>
<div class="line"><span class="lineno">  447</span>        <span class="keywordflow">catch</span> (<a class="code hl_class" href="../../d4/d67/classException.html">Exception</a> <a class="code hl_class" href="../../d6/da9/classList.html">e</a>)</div>
<div class="line"><span class="lineno">  448</span>        {</div>
<div class="line"><span class="lineno">  449</span>            e.HelpLink = <span class="stringliteral">&quot;https://github.com/tModLoader/tModLoader/wiki/Basic-tModLoader-Usage-FAQ#migration-failed&quot;</span>;</div>
<div class="line"><span class="lineno">  450</span>            <a class="code hl_class" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting.html">ErrorReporting</a>.<a class="code hl_function" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_a574da73d6bc90ecf7de39c0dac0a9be9.html#a574da73d6bc90ecf7de39c0dac0a9be9">FatalExit</a>(<span class="stringliteral">&quot;Migration Failed, please consult the instructions in the \&quot;Migration Failed\&quot; section at \&quot;&quot;</span> + <a class="code hl_class" href="../../d6/da9/classList.html">e</a>.HelpLink + <span class="stringliteral">&quot;\&quot; for more information.&quot;</span>, <a class="code hl_class" href="../../d6/da9/classList.html">e</a>);</div>
<div class="line"><span class="lineno">  451</span>        }</div>
<div class="line"><span class="lineno">  452</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/da9/classList.html">isAtomicLockable</a>)</div>
<div class="line"><span class="lineno">  453</span>        {</div>
<div class="line"><span class="lineno">  454</span>            <a class="code hl_class" href="../../d6/da9/classList.html">Directory</a>.Move(<a class="code hl_class" href="../../d6/da9/classList.html">newFolderPathTemp</a>, <a class="code hl_class" href="../../d6/da9/classList.html">newFolderPath</a>);</div>
<div class="line"><span class="lineno">  455</span>        }</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d6/da9/classList.html">isCloud</a>)</div>
<div class="line"><span class="lineno">  457</span>        {</div>
<div class="line"><span class="lineno">  458</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI.html">SocialAPI</a>.<a class="code hl_variable" href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI_a6f4b8d52aae863d79ae6c622f3cf6c5e.html#a6f4b8d52aae863d79ae6c622f3cf6c5e">Cloud</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  459</span>            {</div>
<div class="line"><span class="lineno">  460</span>                <a class="code hl_class" href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI.html">SocialAPI</a>.<a class="code hl_variable" href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI_a6f4b8d52aae863d79ae6c622f3cf6c5e.html#a6f4b8d52aae863d79ae6c622f3cf6c5e">Cloud</a>.Write(<a class="code hl_class" href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities.html">FileUtilities</a>.<a class="code hl_function" href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities_a282e0caff5db217a4c70e381cd74517d.html#a282e0caff5db217a4c70e381cd74517d">ConvertToRelativePath</a>(<a class="code hl_class" href="../../d6/da9/classList.html">superSavePath</a>, <a class="code hl_class" href="../../d6/da9/classList.html">portFilePath</a>), <span class="keyword">new</span> <span class="keywordtype">byte</span>[0]);</div>
<div class="line"><span class="lineno">  461</span>            }</div>
<div class="line"><span class="lineno">  462</span>        }</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  464</span>        {</div>
<div class="line"><span class="lineno">  465</span>            File.Create(<a class="code hl_class" href="../../d6/da9/classList.html">portFilePath</a>);</div>
<div class="line"><span class="lineno">  466</span>        }</div>
<div class="line"><span class="lineno">  467</span>        <a class="code hl_class" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging.html">Logging</a>.<a class="code hl_property" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">tML</a>.Info((<span class="keywordtype">object</span>)(<span class="stringliteral">&quot;Porting &quot;</span> + <a class="code hl_class" href="../../d6/da9/classList.html">cloudName</a> + <span class="stringliteral">&quot; finished&quot;</span>));</div>
<div class="line"><span class="lineno">  468</span>    }</div>
<div class="ttc" id="aclassException_html"><div class="ttname"><a href="../../d4/d67/classException.html">Exception</a></div></div>
<div class="ttc" id="aclassList_html"><div class="ttname"><a href="../../d6/da9/classList.html">List</a></div></div>
<div class="ttc" id="aclassTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_a574da73d6bc90ecf7de39c0dac0a9be9_html_a574da73d6bc90ecf7de39c0dac0a9be9"><div class="ttname"><a href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_a574da73d6bc90ecf7de39c0dac0a9be9.html#a574da73d6bc90ecf7de39c0dac0a9be9">Terraria.ModLoader.Engine.ErrorReporting.FatalExit</a></div><div class="ttdeci">static void FatalExit(string message)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dfe/ErrorReporting_8cs_source.html#l00036">ErrorReporting.cs:36</a></div></div>
<div class="ttc" id="aclassTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_html"><div class="ttname"><a href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting.html">Terraria.ModLoader.Engine.ErrorReporting</a></div><div class="ttdoc">This class handles displaying errors that require a OS-provided modal message box....</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dfe/ErrorReporting_8cs_source.html#l00012">ErrorReporting.cs:13</a></div></div>
<div class="ttc" id="aclassTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e_html_aad9174638bfc9f3fc5bbdb2e4428b89e"><div class="ttname"><a href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">Terraria.ModLoader.Logging.tML</a></div><div class="ttdeci">static ILog tML</div><div class="ttdef"><b>Definition</b> <a href="../../da/d15/Logging_8cs_source.html#l00094">Logging.cs:94</a></div></div>
<div class="ttc" id="aclassTerraria_1_1ModLoader_1_1Logging_html"><div class="ttname"><a href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging.html">Terraria.ModLoader.Logging</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d15/Logging_8cs_source.html#l00025">Logging.cs:26</a></div></div>
<div class="ttc" id="aclassTerraria_1_1Program_aeb611f3f6ff2ff69f95bce3f56cc2282_html_aeb611f3f6ff2ff69f95bce3f56cc2282"><div class="ttname"><a href="../../d9/daf/classTerraria_1_1Program_aeb611f3f6ff2ff69f95bce3f56cc2282.html#aeb611f3f6ff2ff69f95bce3f56cc2282">Terraria.Program.LaunchParameters</a></div><div class="ttdeci">static Dictionary&lt; string, string &gt; LaunchParameters</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d7a/Program_8cs_source.html#l00035">Program.cs:35</a></div></div>
<div class="ttc" id="aclassTerraria_1_1Social_1_1SocialAPI_a6f4b8d52aae863d79ae6c622f3cf6c5e_html_a6f4b8d52aae863d79ae6c622f3cf6c5e"><div class="ttname"><a href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI_a6f4b8d52aae863d79ae6c622f3cf6c5e.html#a6f4b8d52aae863d79ae6c622f3cf6c5e">Terraria.Social.SocialAPI.Cloud</a></div><div class="ttdeci">static Terraria.Social.Base.CloudSocialModule Cloud</div><div class="ttdef"><b>Definition</b> <a href="../../df/d3c/SocialAPI_8cs_source.html#l00020">SocialAPI.cs:20</a></div></div>
<div class="ttc" id="aclassTerraria_1_1Social_1_1SocialAPI_html"><div class="ttname"><a href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI.html">Terraria.Social.SocialAPI</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/d3c/SocialAPI_8cs_source.html#l00012">SocialAPI.cs:13</a></div></div>
<div class="ttc" id="aclassTerraria_1_1Utilities_1_1FileUtilities_a282e0caff5db217a4c70e381cd74517d_html_a282e0caff5db217a4c70e381cd74517d"><div class="ttname"><a href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities_a282e0caff5db217a4c70e381cd74517d.html#a282e0caff5db217a4c70e381cd74517d">Terraria.Utilities.FileUtilities.ConvertToRelativePath</a></div><div class="ttdeci">static string ConvertToRelativePath(string basePath, string fullPath)</div><div class="ttdoc">Converts the full 'path' to remove the base path component. Example: C://My Documents//Help Me I'm Hu...</div><div class="ttdef"><b>Definition</b> <a href="../../de/dee/FileUtilities_8cs_source.html#l00276">FileUtilities.cs:276</a></div></div>
<div class="ttc" id="aclassTerraria_1_1Utilities_1_1FileUtilities_a576795e957a016079bd464d6589f510b_html_a576795e957a016079bd464d6589f510b"><div class="ttname"><a href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities_a576795e957a016079bd464d6589f510b.html#a576795e957a016079bd464d6589f510b">Terraria.Utilities.FileUtilities.CopyFolderEXT</a></div><div class="ttdeci">static void CopyFolderEXT(string sourcePath, string destinationPath, bool isCloud=false, Regex excludeFilter=null, bool overwriteAlways=false, bool overwriteOld=false)</div><div class="ttdef"><b>Definition</b> <a href="../../de/dee/FileUtilities_8cs_source.html#l00245">FileUtilities.cs:245</a></div></div>
<div class="ttc" id="aclassTerraria_1_1Utilities_1_1FileUtilities_html"><div class="ttname"><a href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities.html">Terraria.Utilities.FileUtilities</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/dee/FileUtilities_8cs_source.html#l00014">FileUtilities.cs:15</a></div></div>
<div class="ttc" id="anamespaceTerraria_1_1Enums_a204aa8cb535489f0ef22f6ea25eda014_html_a204aa8cb535489f0ef22f6ea25eda014a419f3742e6de8e0ec4b22cce005e7630"><div class="ttname"><a href="../../da/d0b/namespaceTerraria_1_1Enums_a204aa8cb535489f0ef22f6ea25eda014.html#a204aa8cb535489f0ef22f6ea25eda014a419f3742e6de8e0ec4b22cce005e7630">Terraria.Enums.AnchorType.Platform</a></div><div class="ttdeci">@ Platform</div></div>
<div class="ttc" id="anamespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b_html_affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274"><div class="ttname"><a href="../../da/d24/namespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b.html#affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274">Terraria.ModLoader.SceneEffectPriority.Environment</a></div><div class="ttdeci">@ Environment</div><div class="ttdoc">Will override vanilla SceneEffect for Sandstorm, Hell, Above surface during Eclipse,...</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/da1/classTerraria_1_1Social_1_1SocialAPI_a6f4b8d52aae863d79ae6c622f3cf6c5e.html#a6f4b8d52aae863d79ae6c622f3cf6c5e">Terraria.Social.SocialAPI.Cloud</a>, <a class="el" href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities_a282e0caff5db217a4c70e381cd74517d.html#a282e0caff5db217a4c70e381cd74517d">Terraria.Utilities.FileUtilities.ConvertToRelativePath()</a>, <a class="el" href="../../d7/de3/classTerraria_1_1Utilities_1_1FileUtilities_a576795e957a016079bd464d6589f510b.html#a576795e957a016079bd464d6589f510b">Terraria.Utilities.FileUtilities.CopyFolderEXT()</a>, <a class="el" href="../../da/d24/namespaceTerraria_1_1ModLoader_affc5ce60a82065004f36d2c31383f84b.html#affc5ce60a82065004f36d2c31383f84ba0ba29c6a1afacf586b03a26162c72274">Terraria.ModLoader.Environment</a>, <a class="el" href="../../d1/d0a/classTerraria_1_1ModLoader_1_1Engine_1_1ErrorReporting_a574da73d6bc90ecf7de39c0dac0a9be9.html#a574da73d6bc90ecf7de39c0dac0a9be9">Terraria.ModLoader.Engine.ErrorReporting.FatalExit()</a>, <a class="el" href="../../d9/daf/classTerraria_1_1Program_aeb611f3f6ff2ff69f95bce3f56cc2282.html#aeb611f3f6ff2ff69f95bce3f56cc2282">Terraria.Program.LaunchParameters</a>, and <a class="el" href="../../d0/da6/classTerraria_1_1ModLoader_1_1Logging_aad9174638bfc9f3fc5bbdb2e4428b89e.html#aad9174638bfc9f3fc5bbdb2e4428b89e">Terraria.ModLoader.Logging.tML</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/daf/classTerraria_1_1Program_a2a024c74a9dfd363b587950ee9d6d3e2.html#a2a024c74a9dfd363b587950ee9d6d3e2">Terraria.Program.PortFilesMaster()</a>.</p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d9/daf/classTerraria_1_1Program_a8b7dba2e2d3787ec0f5fb76babb0edd4_a8b7dba2e2d3787ec0f5fb76babb0edd4_cgraph.svg" width="100%" height="530"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d9/daf/classTerraria_1_1Program_a8b7dba2e2d3787ec0f5fb76babb0edd4_a8b7dba2e2d3787ec0f5fb76babb0edd4_icgraph.svg" width="100%" height="392"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d42/namespaceTerraria.html">Terraria</a></li><li class="navelem"><a class="el" href="../../d9/daf/classTerraria_1_1Program.html">Program</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
